import{l as e,i as ge,n as Ee,a as me,b as G,c as le,p as P,d as oe}from"./index-B2DQe_jo.js";e.abap={comments:{line:'"'}};const qe=(t,l,s=0)=>{const r=t.scrollContainer.style,u=document.documentElement.style;r.scrollPaddingBlock=u.scrollPaddingBlock=`${s}px ${ge&&!l.textContent?l.offsetHeight:0}px`,l.scrollIntoView({block:"nearest"}),r.scrollPaddingBlock=u.scrollPaddingBlock=""},ie=(t,l)=>l?t.lastIndexOf(`
`,l-1)+1:0,ae=(t,l)=>(l=t.indexOf(`
`,l))+1?l:t.length,Be=(t,l,s)=>(t.addListener(l,s),()=>t.removeListener(l,s)),Me=(t,l)=>parseFloat(getComputedStyle(t)[l]);let ne;const ee=t=>t.replace(/[$+?|.^*()[\]{}\\]/g,"\\$&"),_=(t,l)=>t.slice(ie(t,l),l),U=(t,l,s=l)=>[t.slice(l=ie(t,l),s=ae(t,s)).split(`
`),l,s],F=(t,l,s=0,r=s,u=t.getSelection()[0])=>{var k;const h=t.value,d=t.wrapper.children[Ee(h,0,u)],w=document.createTreeWalker(d,5);let b=w.lastChild(),v=ae(h,u)+1-u-b.length;for(;-v<=r&&(b=w.previousNode());)if(!b.lastChild&&(v-=b.length||0,v<=s)){for(;b!=d;b=b.parentNode)if((k=b.matches)!=null&&k.call(b,l))return b}},pe=(t,l)=>{var s;return((s=F(t,'[class*="language-"]',0,0,l))==null?void 0:s.className.match(/language-(\S*)/)[1])||t.options.language},M=(t,l,s,r,u,h)=>{if(t.options.readOnly)return;ne=t.getSelection(),r??(r=s);let d=t.textarea,w=t.value,b=ge&&!w[r??ne[1]]&&/\n$/.test(l)&&/^$|\n$/.test(w),v;t.focused||d.focus(),s!=null&&d.setSelectionRange(s,r),u!=null&&(v=Be(t,"update",()=>{d.setSelectionRange(u,h??u,ne[2]),v()})),me||d.dispatchEvent(new InputEvent("beforeinput",{data:l})),ge||me?(b&&(d.selectionEnd--,l=l.slice(0,-1)),me&&(l+=`
`),document.execCommand(l?"insertHTML":"delete",!1,l.replace(/&/g,"&amp;").replace(/</g,"&lt;")),b&&d.selectionStart++):document.execCommand(l?"insertText":"delete",!1,l),ne=0},te=t=>t.altKey+t.ctrlKey*2+t.metaKey*4+t.shiftKey*8,q=/[([{][^)\]}]*$|^[^.]*\b(?:case .+?|default):\s*$/,Re=/\[]|\(\)|{}/,R=/<(?![?!\d#@])([^\s/=>$<%]+)(?:\s(?:\s*[^\s/"'=>]+(?:\s*=\s*(?!\s)(?:"[^"]*"|'[^']*'|[^\s"'=>]+(?=[\s>]))?|(?=[\s/>])))+)?\s*>[ 	]*$/,we=/^<\/(?!\d)[^\s/=>$<%]+\s*>/,$e=/[([{][^)\]}]*$/,he=([t,l],s)=>Re.test(s[t-1]+s[l]),I={line:"//",block:["/*","*/"]},A=/^(?:area|base|w?br|col|embed|hr|img|input|link|meta|source|track)$/i,ye=(t,l)=>!!t&&!(l!=null&&l.test(t[1])),be=(t,l)=>[([s],r)=>ye(r.slice(0,s).match(t),l)||$e.test(_(r,s)),(s,r)=>he(s,r)||ye(r.slice(0,s[0]).match(t),l)&&we.test(r.slice(s[1]))],se={block:["<!--","-->"]},N=(t=se,l=R,s)=>({comments:t,autoIndent:be(l,s),autoCloseTags:([r,u],h,d)=>re(d,r,u,h,l,s)}),re=(t,l,s,r,u,h)=>{if(l==s){let d=u.exec(r.slice(0,l)+">"),w=t.extensions.matchTags;if(d&&(d=d[1]||"",!(h!=null&&h.test(d)))){if(w){let{pairs:b,tags:v}=w;for(let k=v.length;k;){let p=v[--k];if(p[1]>=l&&p[4]&&p[5]&&p[3]==d&&b[k]==null)return}}return`</${d}>`}}},n=(t=I,l=$e)=>({comments:t,autoIndent:[([s],r)=>l.test(_(r,s)),he]}),H=(t,l)=>e[t]={comments:l,autoIndent:be(we,A),autoCloseTags:([s,r],u,h)=>F(h,"."+t,0,0,s)?"":re(h,s,r,u,R,A)};e.abnf=n({line:";"});e.actionscript=N(I);e.ada=n({line:"--"});e.agda={comments:{line:"--"}};e.al=n();e.g4=e.antlr4=n();e.apacheconf={comments:{line:"#"},autoIndent:[([t],l)=>/<\w+\b.*>[ 	]*$/.test(_(l,t)),([t,l],s)=>/<\w+\b.*>$/.test(_(s,t))&&/^<\/\w+\b.*>/.test(s.slice(l))],autoCloseTags([t],l){let s=/<(\w+)\b.*>/.exec(_(l,t)+">");return s&&`</${s[1]}>`}};e.apex=n();e.apl=n({line:"‚çù"});e.applescript={comments:{line:"--",block:["(*","*)"]}};e.aql=n();e.ino=e.arduino=n(I,q);e.arff={comments:{line:"%"}};e.art=e.arturo={comments:{line:";"}};e.adoc=e.asciidoc={comments:{line:"//"}};e["arm-asm"]=e.armasm=e.asm6502=e.asmatmel=e.nasm={comments:{line:";"}};e.aspnet=N({block:["<%--","--%>"]},R,A);e.autohotkey=n({line:";",block:["/*","*/"]});e.autoit={comments:{line:";",block:["#cs","#ce"]}};e.avs=e.avisynth=n({line:"#",block:["/*","*/"]});e.avdl=e["avro-idl"]=n();e.awk=n({line:"#"});e.sh=e.shell=e.bash=n({line:"#"});e.basic={comments:{line:"!"}};e.batch={comments:{line:"::"}};e.bbj={comments:{line:"REM"}};e.bicep=n();e.birb=n(I,q);e.bison=n(I,q);e.bqn=n({line:"#"});e.brightscript={comments:{line:"'"}};e.bro=n({line:"#"});e.bsl=n({line:"//"});e.cfscript=n();e.chaiscript=n();e.cil=n({line:"//"});e["cilk-c"]=e.cilkc=e.cilk=e["cilk-cpp"]=e.cilkcpp=n(I,q);e.clike=e.js=e.javascript=e.ts=e.typescript=e.java=e.cs=e.csharp=e.c=e.cpp=e.go=e.d=e.dart=e.flow=e.haxe=n(I,q);e.clojure=n({line:";"});e.cmake=n({line:"#",block:["#[[","]]"]});e.cobol={comments:{line:"*"}};e.coffee=e.coffeescript=n({line:"#",block:["###","###"]});e.conc=e.concurnas=n();e.cooklang={comments:{line:"--",block:["[-","-]"]}};e.coq=n({block:["(*","*)"]});e.razor=e.cshtml=N({block:["@*","*@"]},R,A);e.css=n({block:["/*","*/"]});e.less=e.scss=n();e.sass={comments:I};e.cue=n({line:"//"});e.cypher=n({line:"//"});e.dataweave=n();e.dax=n();e.dhall=n({line:"--",block:["{-","-}"]});e.jinja2=H("django",{block:["{#","#}"]});e["dns-zone"]=e["dns-zone-file"]={comments:{line:";"}};e.dockerfile=e.docker={comments:{line:"#"}};e.gv=e.dot=n();e.ebnf=n({block:["(*","*)"]});e.editorconfig={comments:{line:"#"}};e.eiffel=n({line:"--"});e.ejs=N({block:["<%#","%>"]},R,A);e.elixir={comments:{line:"#"}};e.elm={comments:{line:"--",block:["{-","-}"]}};e.markup=e.html=e.markdown=e.md=N(se,R,A);e.erb=e.html;e.erlang={comments:{line:"%"}};e.etlua=e.html;e.xlsx=e.xls=e["excel-formula"]=n({block:['N("','")']});e.factor=n({line:"!",block:["/*","*/"]});e.false={comments:{block:["{","}"]}};e["firestore-security-rules"]=n({line:"//"});e.fortran={comments:{line:"!"}};e.fsharp=n({line:"//",block:["(*","*)"]});H("ftl",{block:["<#--","-->"]});e.gap={comments:{line:"#"}};e.gcode={comments:{line:";"}};e.gdscript=n({line:"#"});e.gettext={comments:{line:"#"}};e.gherkin={comments:{line:"#"}};e.git={comments:{line:"#"}};e.glsl=e.hlsl=n(I,q);e.gamemakerlanguage=e.gml=n(I,q);e.gni=e.gn=n({line:"#"});e["go-mod"]=e["go-module"]=n({line:"//"});e.gradle=n();e.graphql=n({line:"#"});e.groovy=n();e.haml=n({line:"-#"});e.mustache=e.hbs=H("handlebars",{block:["{{!","}}"]});e.idr=e.idris=e.hs=e.haskell=e.purs=e.purescript=n({line:"--",block:["{-","-}"]});e.hcl=n({line:"#",block:["/*","*/"]});e.hoon={comments:{line:"::"}};e.ichigojam=n({line:"'"});e.icon=n({line:"#"});e.iecst=n({line:"//",block:["(*","*)"]});e.npmignore=e.hgignore=e.gitignore=e.ignore={comments:{line:"#"}};e.inform7=n({block:["[","]"]});e.ini={comments:{line:";"}};e.io=n();e.j={comments:{line:"NB."}};e.jolie=n();e.jq=n({line:"#"});e.json=e.json5=e.jsonp=n();var Te=(t,l)=>t.replace(/<(\d+)>/g,(s,r)=>`(?:${l[+r]})`),Ae=(t,l,s)=>RegExp(Te(t,l),s),Le="\\s|//.*(?!.)|/\\*(?:[^*]|\\*(?!/))*\\*/",je="\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})*\\}",Pe=Te("\\{<0>*\\.{3}(?:[^{}]|<1>)*\\}",[Le,je]);const fe=Ae(`(?:^|[^$\\w])<(?:(?!\\d)([^\\s/=><%]+)(?:<0>(?:<0>*(?:[^\\s"'{=<>/*]+(?:<0>*=<0>*(?!\\s)(?:"[^"]*"|'[^']*'|<1>)?|(?=[\\s/>]))|<2>))+)?<0>*)?>[ 	]*$`,[Le,je,Pe]),Ne=/^<\/(?!\d)[^\s/=><%]*\s*>/,Oe=({tags:t,pairs:l},{brackets:s,pairs:r},u)=>{var h,d;for(let w=t.length,b,v=0;b=t[--w];)if(b[2]>u&&b[1]<u)v=b[1];else if(!b[4]&&b[5]&&b[1]>=v&&b[2]<=u&&!(((h=t[l[w]])==null?void 0:h[1])<u)){for(let k=s.length,p;p=s[--k];)if(p[1]>=b[2]&&p[1]<u&&p[3]=="{"&&!(((d=s[r[k]])==null?void 0:d[1])<u))return;return!0}},ze={block:["{/*","*/}"]};e.jsx=e.tsx={comments:I,getComments(t,l){const{matchBrackets:s,matchTags:r}=t.extensions;return(s&&r?Oe(r,s,l):F(t,".plain-text",0,0,l))?ze:I},autoIndent:[([t],l)=>fe.test(l.slice(0,t))||q.test(_(l,t)),(t,l)=>he(t,l)||fe.test(l.slice(0,t[0]))&&Ne.test(l.slice(t[1]))],autoCloseTags:([t,l],s,r)=>re(r,t,l,s,fe)};e.julia=n({line:"#",block:["#=","=#"]});e.keepalived=n({line:"#"});e.keyman={comments:{line:"c"}};e.kts=e.kt=e.kotlin=n();e.kumir=n({line:"|"});e.kusto=n({line:"//"});e.context=e.tex=e.latex=n({line:"%"});H("latte",{block:["{*","*}"]});e.ly=e.lilypond=n({line:"%",block:["%{","%}"]});e.ld=e["linker-script"]=n({block:["/*","*/"]});H("liquid",{block:["{% comment %}","{% endcomment %}"]});e["emacs-lisp"]=e.emacs=e.elisp=e.lisp=n({line:";"});e.livescript=n({line:"#",block:["/*","*/"]});e.llvm=n({line:";"});e.lolcode={comments:{line:"BTW",block:["OBTW","TLDR"]}};e.lua=n({line:"--",block:["--[[","]]"]});e.magma=n();e.makefile={comments:{line:"#"}};e.mata=n();e.matlab=n({line:"%",block:["%{","}%"]});e.maxscript=n({line:"--",block:["/*","*/"]});e.mel=n(I,q);e.mermaid=n({line:"%%"});e.metafont=n({line:"%"});e.mizar=n({line:"::"});e.mongodb=n(I,q);e.monkey=n({line:"'"});e.moon=e.moonscript=n({line:"--"});e.n1ql=n({line:"--",block:["/*","*/"]});e.n4jsd=e.n4js=n(I,q);e["nand2tetris-hdl"]=n();e.nani=e.naniscript=n({line:";"});e.neon=n({line:"#"});e.nevod=n();e.nginx=n({line:"#"});e.nim=n({line:"#"});e.nix=n({line:"#",block:["/*","*/"]});e.nsis=n({line:"#",block:["/*","*/"]});e.objc=e.objectivec=n(I,q);e.ocaml=n({block:["(*","*)"]});e.odin=n();e.opencl=n(I,q);e.qasm=e.openqasm=n();e.oz=n({line:"%",block:["/*","*/"]});e.parigp=n({line:"\\\\",block:["/*","*/"]});e.parser=N({line:"#",block:["<!--","-->"]},R,A);e.pascaligo=e.objectpascal=e.pascal=n({line:"//",block:["(*","*)"]});e.pcode=e.peoplecode={comments:{block:["/*","*/"]}};e.perl=n({line:"#"});e.php={comments:I,getComments:(t,l)=>F(t,".php",0,0,l)?I:se,autoIndent:be(R,A),autoCloseTags:([t,l],s,r)=>!s.includes("<?")||F(r,".php",0,0,t)?"":re(r,t,l,s,R,A)};e.plantuml=e["plant-uml"]=n({line:"'",block:["/'","'/"]});e.mscript=e.pq=e.powerquery=n();e.powershell=n({line:"#",block:["<#","#>"]});e.processing=n();e.prolog=n({line:"%",block:["/*","*/"]});e.promql=n({line:"#"});e.properties={comments:{line:"#"}};e.protobuf=n();e.psl=n({line:"#"});e.pug=n({line:"//-"});e.puppet=n({line:"#",block:["/*","*/"]});e.pure=n();e.pbfasm=e.purebasic=n({line:";"});e.rpy=e.renpy=e.py=e.python=n({line:"#"},/[([{][^)\]}]*$|:\s*$/);e.q=n({line:"/"});e.qml=n();e.qore=n();e.qs=e.qsharp=n({line:"//"});e.r=n({line:"#"});e.reason=n();e.rego=n({line:"#"});e.res=e.rescript=n();e.rest={comments:{line:".."}};e.rip=n({line:"#"});e.roboconf=n({line:"#"});e.robot=e.robotframework={comments:{line:"#"}};e.crystal=e.rb=e.ruby=n({line:"#",block:["=begin","=end"]});e.rust=n();e.sas=n({block:["/*","*/"]});e.scala=n();e.racket=e.scheme=n({line:";",block:["#|","|#"]});e.smali={comments:{line:"#"}};e.smalltalk=n({block:['"','"']});H("smarty",{block:["{*","*}"]});e.smlnj=e.sml=n({block:["(*","*)"]});e.sol=e.solidity=n(I,q);e.sln=e["solution-file"]={comments:{line:"#"}};H("soy",I);e["splunk-spl"]=n({block:['`comment("','")`']});e.sqf=n();e.plsql=e.sql=n({line:"--",block:["/*","*/"]});e.squirrel=n(I,q);e.stan=n();e.stata=n();e.stylus=n();e.sclang=e.supercollider=n();e.swift=n();e.systemd={comments:{line:"#"}};e.tcl=n({line:"#"});e.textile=N(se,R,A);e.toml=n({line:"#"});e.trickle=e.troy=e.tremor={comments:{line:"#"}};H("tt2",{block:["[%#","%]"]}).getComments=(t,l)=>({line:F(t,".tt2",0,0,l)&&"#",block:["[%#","%]"]});e.rq=e.sparql=e.trig=e.turtle=n({line:"#"});H("twig",{block:["{#","#}"]});e.tsconfig=e.typoscript=n();e.uc=e.uscript=e.unrealscript=n(I,q);e.uorazor={comments:{line:"#"}};e.v=n();e.vala=n(I,q);e.vbnet={comments:{line:"'"}};e.velocity=N({line:"##",block:["#*","*#"]},R,A);e.verilog=n();e.vhdl=n({line:"--"});e.vim=n({line:'"'});e.vba=e.vb=e["visual-basic"]=n({line:"'"});e.warpscript=n();e.wasm={comments:{line:";;",block:["(;",";)"]}};e.webidl=e["web-idl"]=n();e.wgsl=n();e.wiki=N({block:["/*","*/"]},R,A);e.nb=e.wl=e.mathematica=e.wolfram=n({block:["(*","*)"]});e.wren=n();e.xeoracube=e.xeora=N(se,R,A);e.xml=e.ssml=e.atom=e.rss=e.mathml=e.svg=N();e.xojo={comments:{line:"//"}};const Se=["(:",":)"],De=e.xquery=N({block:Se},/<(?!!|\d)([^\s/=>$<%]+)(?:\s+[^\s/=>]+(?:\s*=\s*(["'])(?:\{\{|\{(?!\{)(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})*\}|(?!\2)[^{])*\2)?)*\s*>[ 	]*$/);De.getComments=(t,l)=>({block:F(t,".plain-text",0,0,l)?["{(:",":)}"]:Se});e.yml=e.yaml=n({line:"#"});e.yang=n();e.zig=n({line:"//"});const We=(t=!0,l="([{",s=")]}")=>{let r,u;const h=[],d=p=>{p.extensions.matchBrackets=d,p.addListener("tokenize",v),t&&p.tokens[0]?p.update():v(p.tokens)},w=d.brackets=[],b=d.pairs=[],v=p=>{if(b.length=w.length=u=r=0,k(p,0),t)for(let $=0,x;x=w[$];){let T=x[0].alias;x[0].alias=(T?T+" ":"")+`bracket-${$++in b?"level-"+x[2]%12:"error"}`}},k=(p,$)=>{let x,T=0;for(;x=p[T++];){let c=x.length;if(typeof x!="string"){let o=x.content;if(Array.isArray(o))k(o,$);else if((x.alias||x.type)=="punctuation"){let m=xe(o,l,c-1),a=m||xe(o,s,c-1);if(a){if(w[r]=[x,$,0,o,!!m,$+c],m)h[u++]=[r,m];else for(let i=u;i;){let[g,f]=h[--i];a==f&&(b[b[r]=g]=r,w[r][2]=w[g][2]=u=i,i=0)}r++}}}$+=c}};return d},xe=(t,l,s)=>l.indexOf(t[0])+1||s&&l.indexOf(t[s])+1,Ke=()=>t=>{let l,s,r,u=-1,h=[],d=()=>{s||(s=t.extensions.matchBrackets);let[v,k]=t.getSelection(),p=v==k&&t.focused&&s&&w(k)||-1;if(p!=u){if(b(),p+1){let $=l[r[p]],x=l[p];h=[$,x].map(T=>F(t,".punctuation",0,-1,T[1])),h[0]!=h[1]&&$[1]+$[3].length==x[1]&&(h[0].textContent+=h[1].textContent,h[1].textContent="",h[1]=h[0]),b(!0)}else h=[];u=p}},w=v=>{var k;({brackets:l,pairs:r}=s);for(let p=0,$;$=l[++p];)if(!$[4]&&$[5]>=v&&((k=l[r[p]])==null?void 0:k[1])<=v)return p},b=v=>h.forEach(k=>k.classList.toggle("active-bracket",!!v));G(t,"focus",d),G(t,"blur",d),t.addListener("selectionChange",d),t.addListener("update",()=>{b(),u=-1})},Ve=le("<div class=guide-indents style=left:var(--padding-left);bottom:auto;right:auto> "),_e=le("<div style=width:1px;position:absolute;background:var(--bg-guide-indent)>"),He=()=>{let t,l=0,s,r=-1,u;const h=[],d=[],w=Ve(),b=[],v=x=>{s=[];const T=p(x.split(`
`)),c=T.length;for(let o=0,m=[],a=T[0];a;o++){const i=(h[o]||(h[o]=_e())).style,[g,f,C]=a,y=d[o];a=T[o+1],g!=(y==null?void 0:y[0])&&(i.top=g+"00%"),f!=(y==null?void 0:y[1])&&(i.height=f+"00%"),C!=(y==null?void 0:y[2])&&(i.left=C*100+"%");const j=m[0]!=g&&(a==null?void 0:a[0])!=g,S=m[0]+m[1]!=g+f&&(a==null?void 0:a[0])+(a==null?void 0:a[1])!=g+f;for(let L=-j,E=f+S;L<E;L++)s[L+g]=o;m=d[o]=T[o]}for(let o=l;o>c;)h[--o].remove();w.append(...h.slice(l,l=c))},k=()=>{const x=s[u.activeLineNumber-1]??-1;x!=r&&(r>-1&&(h[r].className=""),x>-1&&(h[x].className="active")),r=x},p=x=>{const T=x.length,c=[],o=[];for(let m=0,a=-1,i=0,g=0;;i++){const f=i==T,C=f?0:b[i]=$(x[i]);if(C<0)a<0&&(a=i);else{for(let y=C;y<m;y++)c[y][1]=(a<0||y==C&&!f?i:a)-c[y][0];for(let y=m;y<C;)o[g++]=c[y]=[a<0||y>m?i:a,0,y++*t];a=-1,m=C}if(f)break}return b.length=T,o},$=x=>{let T=x.search(/\S/),c=0;if(T<0)return T;for(let o=0;o<T;)c+=x[o++]=="	"?t-c%t:1;return Math.ceil(c/t)};return{lines:w.children,indentLevels:b,update(x,T){u||(u=x,x.extensions.indentGuides=this,x.overlays.append(w),x.addListener("update",v),x.addListener("selectionChange",k)),w.style.display=T.wordWrap?"none":"",t!=(t=T.tabSize||2)&&(v(x.value),k())}}},Je=le("<div style=position:absolute;top:0;opacity:0;padding:inherit> <span><span></span> "),Ue=()=>{let t,l=" ",s=" ";const r=Je(),[u,h]=r.childNodes,[d,w]=h.childNodes,b=p=>{let{value:$,activeLine:x}=t,T=p[p[2]<"f"?0:1],c=_($,T),o=$.slice(T,ae($,T));!c&&!o&&(o=" "),l!=c&&(u.data=l=c),s!=o&&(w.data=s=o),r.parentNode!=x&&x.prepend(r)},v=()=>qe(t,d),k=p=>{p.addListener("selectionChange",b),t=p,p.extensions.cursor=k,G(p,"input",$=>{/history/.test($.inputType)&&v()}),p.activeLine&&b(p.getSelection())};return k.getPosition=()=>{const p=d.getBoundingClientRect(),$=t.overlays.getBoundingClientRect();return{top:p.y-$.y,bottom:$.bottom-p.bottom,left:p.x-$.x,right:$.right-p.x,height:p.height}},k.scrollIntoView=v,k.element=d,k};let ue=!1;const ve=navigator.clipboard,Z=oe?4:2,Ge=t=>ue=t,Y=t=>t.search(/\S|$/),Fe=(t=['""',"''","``","()","[]","{}"],l=/([^$\w'"`]["'`]|.[[({])[.,:;\])}>\s]|.[[({]`/s)=>(s,r)=>{let u;const{keyCommandMap:h,inputCommandMap:d,getSelection:w,scrollContainer:b}=s,v=({insertSpaces:c=!0,tabSize:o}=r)=>[c?" ":"	",c?o||2:1],k=()=>{var c;return!r.readOnly&&!((c=s.extensions.cursor)!=null&&c.scrollIntoView())},p=([c,o],[m,a],i,g)=>(c<o||!g&&l.test((i[o-1]||" ")+m+(i[o]||" ")))&&!M(s,m+i.slice(c,o)+a,null,null,c+1,o+1),$=([c,o],m,a)=>c==o&&a[o]==m&&!s.setSelection(c+1),x=(c,o,m,a,i,g)=>{let f=o.join(`
`);if(f!=c.join(`
`)){const C=c.length-1,y=o[C],j=c[C],S=j.length-y.length,L=o[0].length-c[0].length,E=m+Y((L<0?o:c)[0]),B=a-j.length+Y(S>0?y:j),K=m-a+f.length+S,J=E>i?i:Math.max(E,i+L),Q=g+m-a+f.length;M(s,f,m,a,J,g<B?Q+S:Math.max(B+K,Q))}},T=(c,o,m,a,i,g,f,C)=>{x(o,o.map(c?y=>y.slice(Y(y)?C-Y(y)%C:0):y=>y&&f.repeat(C-Y(y)%C)+y),m,a,i,g)};d["<"]=(c,o,m)=>p(o,"<>",m,!0),t.forEach(([c,o])=>{const m=c==o;d[c]=(a,i,g)=>(m&&$(i,o,g)||p(i,c+o,g))&&k(),m||(d[o]=(a,i,g)=>$(i,o,g)&&k())}),d[">"]=(c,o,m)=>{var i,g;const a=(g=(i=e[pe(s)])==null?void 0:i.autoCloseTags)==null?void 0:g.call(i,o,m,s);a&&(M(s,">"+a,null,null,o[0]+1),P(c))},h.Tab=(c,[o,m],a)=>{if(ue||r.readOnly||te(c)&6)return;const[i,g]=v(r),f=c.shiftKey,[C,y,j]=U(a,o,m);return o<m||f?T(f,C,y,j,o,m,i,g):M(s,i.repeat(g-(o-y)%g)),k()},h.Enter=(c,o,m)=>{var i,g,f;const a=te(c)&7;if(!a||a==Z){a&&(o[0]=o[1]=U(m,o[1])[2]);const[C,y]=v(),[j,S]=o,L=(i=e[pe(s)])==null?void 0:i.autoIndent,E=Math.floor(Y(_(m,j))/y)*y,B=(g=L==null?void 0:L[0])!=null&&g.call(L,o,m,s)?y:0,K=(f=L==null?void 0:L[1])==null?void 0:f.call(L,o,m,s),J=`
`+C.repeat(E+B)+(K?`
`+C.repeat(E):"");if(J[1]||m[S])return M(s,J,j,S,j+E+B+1),k()}},h.Backspace=(c,[o,m],a)=>{if(o==m){const i=_(a,o),g=r.tabSize||2,f=t.includes(a.slice(o-1,o+1)),C=/[^ ]/.test(i)?0:(i.length-1)%g+1;if(f||C>1)return M(s,"",o-(f?1:C),o+f),k()}};for(let c=0;c<2;c++)h[c?"ArrowDown":"ArrowUp"]=(o,[m,a],i)=>{const g=te(o);if(g==1){const f=c?m:ie(i,m)-1,C=c?i.indexOf(`
`,a)+1:a;if(f>-1&&C>0){const[y,j,S]=U(i,f,C),L=y[c?"pop":"shift"](),E=(L.length+1)*(c?1:-1);y[c?"unshift":"push"](L),M(s,y.join(`
`),j,S,m+E,a+E)}return k()}else if(g==9){const[f,C,y]=U(i,m,a),j=f.join(`
`),S=c?j.length+1:0;return M(s,j+`
`+j,C,y,m+S,a+S),k()}else if(g==2&&!oe)return b.scrollBy(0,Me(b,"lineHeight")*(c?1:-1)),!0};G(s,"keydown",c=>{var f;const o=te(c),m=c.keyCode,[a,i,g]=w();if(o==Z&&(m==221||m==219))T(m==219,...U(s.value,a,i),a,i,...v()),k(),P(c);else if(o==(oe?10:2)&&m==77)Ge(!ue),P(c);else if(m==191&&o==Z||m==65&&o==9){const C=s.value,y=o==9,j=y?a:ie(C,a),S=e[pe(s,j)]||{},{line:L,block:E}=((f=S.getComments)==null?void 0:f.call(S,s,j,C))||S.comments||{},[B,K,J]=U(C,a,i),Q=B.length-1;if(y){if(E){const[O,V]=E,X=C.slice(a,i),z=C.slice(0,a).search(ee(O)+" ?$"),D=RegExp("^ ?"+ee(V)).test(C.slice(i));z+1&&D?M(s,X,z,i+ +(C[i]==" ")+V.length,z,z+i-a):M(s,`${O} ${X} ${V}`,a,i,a+O.length+1,i+O.length+1),k(),P(c)}}else if(L){const O=ee(L),V=RegExp(`^\\s*(${O} ?|$)`),X=RegExp(O+" ?"),z=!/\S/.test(C.slice(K,J)),D=B.map(B.every(W=>V.test(W))&&!z?W=>W.replace(X,""):W=>z||/\S/.test(W)?W.replace(/^\s*/,`$&${L} `):W);x(B,D,K,J,a,i),k(),P(c)}else if(E){const[O,V]=E,X=Y(B[0]),z=B[0].startsWith(O,X)&&B[Q].endsWith(V),D=B.slice();D[0]=B[0].replace(z?RegExp(ee(O)+" ?"):/(?=\S)|$/,z?"":O+" ");let W=D[0].length-B[0].length;D[Q]=z?D[Q].replace(RegExp(`( ?${ee(V)})?$`),""):D[Q]+" "+V;let ke=D.join(`
`),ce=X+K,de=ce>a?a:Math.max(a+W,ce),Ie=ce>i-(a!=i)?i:Math.min(Math.max(ce,i+W),K+ke.length);M(s,ke,K,J,de,Math.max(de,Ie)),k(),P(c)}}else if(o==8+Z&&m==75){const C=s.value,[y,j,S]=U(C,a,i),L=g>"f"?i-S+y.pop().length:a-j,E=ae(C,S+1)-S-1;M(s,"",j-!!j,S+!j,j+Math.min(L,E)),k(),P(c)}}),["copy","cut","paste"].forEach(c=>G(s,c,o=>{const[m,a]=w();if(m==a&&ve){const[[i],g,f]=U(s.value,m,a);c=="paste"?o.clipboardData.getData("text/plain")==u&&(M(s,u+`
`,g,g,m+u.length+1),k(),P(o)):(ve.writeText(u=i),c=="cut"&&(M(s,"",g,f+1),k()),P(o))}}))},Qe=(t=999)=>{let l=0,s,r,u=!1,h,d,w,b,v,k;const p=[],$=c=>{c>=t&&(c--,p.shift()),p.splice(l=c,t,[s.value,k(),k()])},x=c=>{var o;p[c]&&(v.value=p[c][0],v.setSelectionRange(...p[c][c<l?2:1]),s.update(),(o=s.extensions.cursor)==null||o.scrollIntoView(),l=c,r=!1)},T=(c,o)=>{c.extensions.history=T,s=c,k=c.getSelection,v||$(0),v=c.textarea,c.addListener("selectionChange",()=>{r=u,u=!1}),G(c,"beforeinput",m=>{let a=m.data,i=m.inputType,g=m.timeStamp;/history/.test(i)?(x(l+(i[7]=="U"?-1:1)),P(m)):(b=r&&(h==i||g-w<99&&i.slice(-4)=="Drop")&&!ne&&(a!=" "||d==a))||(p[l][2]=ne||k()),u=!0,d=a,w=g,h=i}),G(c,"input",()=>$(l+!b)),G(c,"keydown",m=>{if(!o.readOnly){const a=te(m),i=m.keyCode,g=a==Z&&i==90,f=a==Z+8&&i==90||!oe&&a==Z&&i==89;g?(x(l-1),P(m)):f&&(x(l+1),P(m))}})};return T.clear=()=>{$(0),r=!1},T.has=c=>l+c in p,T.go=c=>x(l+c),T},Xe=le('<div style="color:#0000;contain:strict;padding:0 var(--_pse) 0 var(--padding-left)" aria-hidden=true> '),Ye=le("<span> "),Ce=(t,l,s=/[_\p{N}\p{L}]{2}/u)=>l?s.test(t.slice(l-(t.codePointAt(l-2)>65535?2:1),l+(t.codePointAt(l)>65535?2:1))):!1,Ze=t=>{const l=Xe(),s=[l.firstChild],r=[" "],u=[],h=()=>{u[0]&&(u.length=0,l.remove())};let d,w=1;return{search(b,v,k,p,$,x,T){if(!b)return h();p||(b=ee(b));const c=t.value,o=$?c.slice(...$):c,m=$?$[0]:0;let a,i,g,f=0;try{for(d=RegExp(b,`gum${v?"":"i"}`);a=d.exec(o);)i=a[0].length,g=a.index+m,i||(d.lastIndex+=c.codePointAt(g)>65535?2:1),!(k&&(Ce(c,g,T)||Ce(c,g+i,T)))&&(!x||x(g,g+i))&&(u[f++]=[g,g+i])}catch(C){return h(),C.message}if(f){for(u.length=f,i=Math.min(f*2,2e4),f=s.length;f<=i;)s[f++]=Ye(),s[f++]=new Text;for(f=w-1;f>i;)s[f--].remove();w<=i&&l.append(...s.slice(w,i+1));let C=0;for(f=0;f<i;++f){const[y,j]=u[f/2],S=c.slice(C,y),L=c.slice(y,C=j);S!=r[f]&&(s[f].data=r[f]=S),L!=r[++f]&&(s[f].firstChild.data=r[f]=L)}s[i].data=r[i]=c.slice(C),l.parentNode||t.overlays.append(l),w=i+1}else h()},container:l,get regex(){return d},matches:u,stopSearch:h}},en=(t,l=1,s=200)=>{const r=u=>{const h=r.api=Ze(u),d=h.container;d.style.zIndex=-1,d.className="selection-matches",u.addListener("selectionChange",([w,b],v)=>{v=u.focused?v.slice(w,b):"",w+=v.search(/\S/),v=v.trim();let k=v.length;h.search(l>k||k>s?"":v,t,!1,!1,void 0,(p,$)=>p>w||$<=w)})};return r},tn=(t=Qe())=>[Fe(),He(),We(),Ke(),Ue(),en(),t,{update(l){l.value!=l.textarea.value&&t.clear()}}];export{tn as common};
